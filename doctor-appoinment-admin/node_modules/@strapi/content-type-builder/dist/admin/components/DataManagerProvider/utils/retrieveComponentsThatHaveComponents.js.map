{"version":3,"file":"retrieveComponentsThatHaveComponents.js","sources":["../../../../../admin/src/components/DataManagerProvider/utils/retrieveComponentsThatHaveComponents.ts"],"sourcesContent":["import get from 'lodash/get';\n\nimport type { Component, AttributeType, Components } from '../../../types';\nimport type { Internal } from '@strapi/types';\n\ntype ChildComponent = {\n  component: Internal.UID.Component;\n};\n\nexport type ComponentWithChildren = {\n  component: Internal.UID.Component;\n  childComponents: ChildComponent[];\n};\n\nconst retrieveComponentsThatHaveComponents = (allComponents: Components) => {\n  const componentsThatHaveNestedComponents = Object.keys(allComponents).reduce(\n    (acc: ComponentWithChildren[], current) => {\n      const currentComponent = get(allComponents, [current]);\n\n      const compoWithChildren = getComponentWithChildComponents(currentComponent);\n      if (compoWithChildren.childComponents.length > 0) {\n        acc.push(compoWithChildren);\n      }\n\n      return acc;\n    },\n    []\n  );\n\n  return componentsThatHaveNestedComponents;\n};\n\nconst getComponentWithChildComponents = (component: Component): ComponentWithChildren => {\n  const attributes = get(component, ['schema', 'attributes'], []) as AttributeType[];\n  return {\n    component: component.uid,\n    childComponents: attributes\n      .filter((attribute) => {\n        const { type } = attribute;\n\n        return type === 'component';\n      })\n      .map((attribute) => {\n        return {\n          component: attribute.component,\n        } as ChildComponent;\n      }),\n  };\n};\n\nexport { getComponentWithChildComponents, retrieveComponentsThatHaveComponents };\n"],"names":["retrieveComponentsThatHaveComponents","allComponents","componentsThatHaveNestedComponents","Object","keys","reduce","acc","current","currentComponent","get","compoWithChildren","getComponentWithChildComponents","childComponents","length","push","component","attributes","uid","filter","attribute","type","map"],"mappings":";;;;AAcA,MAAMA,uCAAuC,CAACC,aAAAA,GAAAA;IAC5C,MAAMC,kCAAAA,GAAqCC,OAAOC,IAAI,CAACH,eAAeI,MAAM,CAC1E,CAACC,GAA8BC,EAAAA,OAAAA,GAAAA;QAC7B,MAAMC,gBAAAA,GAAmBC,IAAIR,aAAe,EAAA;AAACM,YAAAA;AAAQ,SAAA,CAAA;AAErD,QAAA,MAAMG,oBAAoBC,+BAAgCH,CAAAA,gBAAAA,CAAAA;AAC1D,QAAA,IAAIE,iBAAkBE,CAAAA,eAAe,CAACC,MAAM,GAAG,CAAG,EAAA;AAChDP,YAAAA,GAAAA,CAAIQ,IAAI,CAACJ,iBAAAA,CAAAA;AACX;QAEA,OAAOJ,GAAAA;AACT,KAAA,EACA,EAAE,CAAA;IAGJ,OAAOJ,kCAAAA;AACT;AAEA,MAAMS,kCAAkC,CAACI,SAAAA,GAAAA;IACvC,MAAMC,UAAAA,GAAaP,IAAIM,SAAW,EAAA;AAAC,QAAA,QAAA;AAAU,QAAA;AAAa,KAAA,EAAE,EAAE,CAAA;IAC9D,OAAO;AACLA,QAAAA,SAAAA,EAAWA,UAAUE,GAAG;QACxBL,eAAiBI,EAAAA,UAAAA,CACdE,MAAM,CAAC,CAACC,SAAAA,GAAAA;YACP,MAAM,EAAEC,IAAI,EAAE,GAAGD,SAAAA;AAEjB,YAAA,OAAOC,IAAS,KAAA,WAAA;SAEjBC,CAAAA,CAAAA,GAAG,CAAC,CAACF,SAAAA,GAAAA;YACJ,OAAO;AACLJ,gBAAAA,SAAAA,EAAWI,UAAUJ;AACvB,aAAA;AACF,SAAA;AACJ,KAAA;AACF;;;;;"}