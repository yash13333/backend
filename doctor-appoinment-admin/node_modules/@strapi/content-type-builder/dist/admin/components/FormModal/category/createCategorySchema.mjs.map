{"version":3,"file":"createCategorySchema.mjs","sources":["../../../../../admin/src/components/FormModal/category/createCategorySchema.ts"],"sourcesContent":["import { translatedErrors as errorsTrads } from '@strapi/admin/strapi-admin';\nimport * as yup from 'yup';\n\nimport { CATEGORY_NAME_REGEX } from './regex';\n\nexport const createCategorySchema = (usedCategoryNames: Array<string>) => {\n  const shape = {\n    name: yup\n      .string()\n      .matches(CATEGORY_NAME_REGEX, errorsTrads.regex.id)\n      .test({\n        name: 'nameNotAllowed',\n        message: errorsTrads.unique.id,\n        test(value) {\n          if (!value) {\n            return false;\n          }\n          return !usedCategoryNames.includes(value?.toLowerCase());\n        },\n      })\n      .required(errorsTrads.required.id),\n  };\n\n  return yup.object(shape);\n};\n"],"names":["createCategorySchema","usedCategoryNames","shape","name","yup","string","matches","CATEGORY_NAME_REGEX","errorsTrads","regex","id","test","message","unique","value","includes","toLowerCase","required","object"],"mappings":";;;;AAKO,MAAMA,uBAAuB,CAACC,iBAAAA,GAAAA;AACnC,IAAA,MAAMC,KAAQ,GAAA;AACZC,QAAAA,IAAAA,EAAMC,GACHC,CAAAA,MAAM,EACNC,CAAAA,OAAO,CAACC,mBAAAA,EAAqBC,gBAAYC,CAAAA,KAAK,CAACC,EAAE,CACjDC,CAAAA,IAAI,CAAC;YACJR,IAAM,EAAA,gBAAA;YACNS,OAASJ,EAAAA,gBAAAA,CAAYK,MAAM,CAACH,EAAE;AAC9BC,YAAAA,IAAAA,CAAAA,CAAKG,KAAK,EAAA;AACR,gBAAA,IAAI,CAACA,KAAO,EAAA;oBACV,OAAO,KAAA;AACT;AACA,gBAAA,OAAO,CAACb,iBAAAA,CAAkBc,QAAQ,CAACD,KAAOE,EAAAA,WAAAA,EAAAA,CAAAA;AAC5C;AACF,SAAA,CAAA,CACCC,QAAQ,CAACT,gBAAYS,CAAAA,QAAQ,CAACP,EAAE;AACrC,KAAA;IAEA,OAAON,GAAAA,CAAIc,MAAM,CAAChB,KAAAA,CAAAA;AACpB;;;;"}