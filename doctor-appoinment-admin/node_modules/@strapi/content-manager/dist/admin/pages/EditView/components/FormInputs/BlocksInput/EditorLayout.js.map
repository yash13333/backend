{"version":3,"file":"EditorLayout.js","sources":["../../../../../../../admin/src/pages/EditView/components/FormInputs/BlocksInput/EditorLayout.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { Box, Flex, FocusTrap, Portal, IconButton, FlexComponent } from '@strapi/design-system';\nimport { Collapse } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { css, styled } from 'styled-components';\n\nimport { getTranslation } from '../../../../../utils/translations';\n\nimport { useBlocksEditorContext } from './BlocksEditor';\n\nconst CollapseIconButton = styled(IconButton)`\n  position: absolute;\n  bottom: 1.2rem;\n  right: 1.2rem;\n`;\n\nconst ExpandWrapper = styled<FlexComponent>(Flex)`\n  // Background with 20% opacity\n  background: ${({ theme }) => `${theme.colors.neutral800}1F`};\n`;\n\ninterface EditorLayoutProps {\n  children: React.ReactNode;\n  error?: string;\n  onCollapse: () => void;\n  disabled: boolean;\n  ariaDescriptionId: string;\n}\n\nconst EditorLayout = ({\n  children,\n  error,\n  disabled,\n  onCollapse,\n  ariaDescriptionId,\n}: EditorLayoutProps) => {\n  const { formatMessage } = useIntl();\n  const { isExpandedMode } = useBlocksEditorContext('editorLayout');\n\n  React.useEffect(() => {\n    if (isExpandedMode) {\n      document.body.classList.add('lock-body-scroll');\n    }\n\n    return () => {\n      document.body.classList.remove('lock-body-scroll');\n    };\n  }, [isExpandedMode]);\n\n  if (isExpandedMode) {\n    return (\n      <Portal role=\"dialog\" aria-modal={false}>\n        <FocusTrap onEscape={onCollapse}>\n          <ExpandWrapper\n            position=\"fixed\"\n            top={0}\n            left={0}\n            right={0}\n            bottom={0}\n            zIndex={4}\n            justifyContent=\"center\"\n            onClick={onCollapse}\n          >\n            <Box<'div'>\n              background=\"neutral0\"\n              hasRadius\n              shadow=\"popupShadow\"\n              overflow=\"hidden\"\n              width=\"90%\"\n              height=\"90%\"\n              onClick={(e) => e.stopPropagation()}\n              aria-describedby={ariaDescriptionId}\n              position=\"relative\"\n            >\n              <Flex height=\"100%\" alignItems=\"flex-start\" direction=\"column\">\n                {children}\n                <CollapseIconButton\n                  label={formatMessage({\n                    id: getTranslation('components.Blocks.collapse'),\n                    defaultMessage: 'Collapse',\n                  })}\n                  onClick={onCollapse}\n                >\n                  <Collapse />\n                </CollapseIconButton>\n              </Flex>\n            </Box>\n          </ExpandWrapper>\n        </FocusTrap>\n      </Portal>\n    );\n  }\n\n  return (\n    <InputWrapper\n      direction=\"column\"\n      alignItems=\"flex-start\"\n      height=\"512px\"\n      $disabled={disabled}\n      $hasError={Boolean(error)}\n      style={{ overflow: 'hidden' }}\n      aria-describedby={ariaDescriptionId}\n      position=\"relative\"\n    >\n      {children}\n    </InputWrapper>\n  );\n};\n\nconst InputWrapper = styled<FlexComponent>(Flex)<{ $disabled?: boolean; $hasError?: boolean }>`\n  border: 1px solid\n    ${({ theme, $hasError }) => ($hasError ? theme.colors.danger600 : theme.colors.neutral200)};\n  border-radius: ${({ theme }) => theme.borderRadius};\n  background: ${({ theme }) => theme.colors.neutral0};\n\n  ${({ theme, $hasError = false }) => css`\n    outline: none;\n    box-shadow: 0;\n    transition-property: border-color, box-shadow, fill;\n    transition-duration: 0.2s;\n\n    &:focus-within {\n      border: 1px solid ${$hasError ? theme.colors.danger600 : theme.colors.primary600};\n      box-shadow: ${$hasError ? theme.colors.danger600 : theme.colors.primary600} 0px 0px 0px 2px;\n    }\n  `}\n\n  ${({ theme, $disabled }) =>\n    $disabled\n      ? css`\n          color: ${theme.colors.neutral600};\n          background: ${theme.colors.neutral150};\n        `\n      : undefined}\n`;\n\nexport { EditorLayout };\n"],"names":["CollapseIconButton","styled","IconButton","ExpandWrapper","Flex","theme","colors","neutral800","EditorLayout","children","error","disabled","onCollapse","ariaDescriptionId","formatMessage","useIntl","isExpandedMode","useBlocksEditorContext","React","useEffect","document","body","classList","add","remove","_jsx","Portal","role","aria-modal","FocusTrap","onEscape","position","top","left","right","bottom","zIndex","justifyContent","onClick","Box","background","hasRadius","shadow","overflow","width","height","e","stopPropagation","aria-describedby","_jsxs","alignItems","direction","label","id","getTranslation","defaultMessage","Collapse","InputWrapper","$disabled","$hasError","Boolean","style","danger600","neutral200","borderRadius","neutral0","css","primary600","neutral600","neutral150","undefined"],"mappings":"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"}