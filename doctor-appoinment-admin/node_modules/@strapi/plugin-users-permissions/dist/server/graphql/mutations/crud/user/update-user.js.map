{"version":3,"file":"update-user.js","sources":["../../../../../../server/graphql/mutations/crud/user/update-user.js"],"sourcesContent":["'use strict';\n\nconst { toPlainObject } = require('lodash/fp');\n\nconst { checkBadRequest } = require('../../../utils');\n\nconst usersPermissionsUserUID = 'plugin::users-permissions.user';\n\nmodule.exports = ({ nexus, strapi }) => {\n  const { nonNull } = nexus;\n  const { getContentTypeInputName, getEntityResponseName } = strapi\n    .plugin('graphql')\n    .service('utils').naming;\n\n  const userContentType = strapi.getModel(usersPermissionsUserUID);\n\n  const userInputName = getContentTypeInputName(userContentType);\n  const responseName = getEntityResponseName(userContentType);\n\n  return {\n    type: nonNull(responseName),\n\n    args: {\n      id: nonNull('ID'),\n      data: nonNull(userInputName),\n    },\n\n    description: 'Update an existing user',\n\n    async resolve(parent, args, context) {\n      const { koaContext } = context;\n\n      koaContext.params = { id: args.id };\n      koaContext.request.body = toPlainObject(args.data);\n\n      await strapi.plugin('users-permissions').controller('user').update(koaContext);\n\n      checkBadRequest(koaContext.body);\n\n      return {\n        value: koaContext.body,\n        info: { args, resourceUID: 'plugin::users-permissions.user' },\n      };\n    },\n  };\n};\n"],"names":["toPlainObject","require$$0","checkBadRequest","require$$1","usersPermissionsUserUID","updateUser","nexus","strapi","nonNull","getContentTypeInputName","getEntityResponseName","plugin","service","naming","userContentType","getModel","userInputName","responseName","type","args","id","data","description","resolve","parent","context","koaContext","params","request","body","controller","update","value","info","resourceUID"],"mappings":";;;;;;;;;;IAEA,MAAM,EAAEA,aAAa,EAAE,GAAGC,UAAAA;IAE1B,MAAM,EAAEC,eAAe,EAAE,GAAGC,eAAAA,EAAAA;AAE5B,IAAA,MAAMC,uBAA0B,GAAA,gCAAA;AAEhCC,IAAAA,UAAAA,GAAiB,CAAC,EAAEC,KAAK,EAAEC,MAAM,EAAE,GAAA;QACjC,MAAM,EAAEC,OAAO,EAAE,GAAGF,KAAAA;AACpB,QAAA,MAAM,EAAEG,uBAAuB,EAAEC,qBAAqB,EAAE,GAAGH,MACxDI,CAAAA,MAAM,CAAC,SAAA,CAAA,CACPC,OAAO,CAAC,SAASC,MAAM;QAE1B,MAAMC,eAAAA,GAAkBP,MAAOQ,CAAAA,QAAQ,CAACX,uBAAAA,CAAAA;AAExC,QAAA,MAAMY,gBAAgBP,uBAAwBK,CAAAA,eAAAA,CAAAA;AAC9C,QAAA,MAAMG,eAAeP,qBAAsBI,CAAAA,eAAAA,CAAAA;QAE3C,OAAO;AACLI,YAAAA,IAAAA,EAAMV,OAAQS,CAAAA,YAAAA,CAAAA;YAEdE,IAAM,EAAA;AACJC,gBAAAA,EAAAA,EAAIZ,OAAQ,CAAA,IAAA,CAAA;AACZa,gBAAAA,IAAAA,EAAMb,OAAQQ,CAAAA,aAAAA;AACf,aAAA;YAEDM,WAAa,EAAA,yBAAA;AAEb,YAAA,MAAMC,OAAQC,CAAAA,CAAAA,MAAM,EAAEL,IAAI,EAAEM,OAAO,EAAA;gBACjC,MAAM,EAAEC,UAAU,EAAE,GAAGD,OAAAA;AAEvBC,gBAAAA,UAAAA,CAAWC,MAAM,GAAG;AAAEP,oBAAAA,EAAAA,EAAID,KAAKC;AAAE,iBAAA;AACjCM,gBAAAA,UAAAA,CAAWE,OAAO,CAACC,IAAI,GAAG7B,aAAAA,CAAcmB,KAAKE,IAAI,CAAA;gBAEjD,MAAMd,MAAAA,CAAOI,MAAM,CAAC,mBAAA,CAAA,CAAqBmB,UAAU,CAAC,MAAA,CAAA,CAAQC,MAAM,CAACL,UAAAA,CAAAA;AAEnExB,gBAAAA,eAAAA,CAAgBwB,WAAWG,IAAI,CAAA;gBAE/B,OAAO;AACLG,oBAAAA,KAAAA,EAAON,WAAWG,IAAI;oBACtBI,IAAM,EAAA;AAAEd,wBAAAA,IAAAA;wBAAMe,WAAa,EAAA;AAAkC;AACrE,iBAAA;AACK;AACL,SAAA;AACA,KAAA;;;;;;"}