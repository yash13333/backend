{"version":3,"file":"config.js","sources":["../../server/config.js"],"sourcesContent":["'use strict';\n\nmodule.exports = {\n  default: ({ env }) => ({\n    jwtSecret: env('JWT_SECRET'),\n    jwt: {\n      expiresIn: '30d',\n    },\n    ratelimit: {\n      interval: 60000,\n      max: 10,\n    },\n    layout: {\n      user: {\n        actions: {\n          create: 'contentManagerUser.create', // Use the User plugin's controller.\n          update: 'contentManagerUser.update',\n        },\n      },\n    },\n    callback: {\n      validate(callback, provider) {\n        let uCallback;\n        let uProviderCallback;\n\n        try {\n          uCallback = new URL(callback);\n          uProviderCallback = new URL(provider.callback);\n        } catch {\n          throw new Error('The callback is not a valid URL');\n        }\n\n        // Make sure the different origin matches\n        if (uCallback.origin !== uProviderCallback.origin) {\n          throw new Error(\n            `Forbidden callback provided: origins don't match. Please verify your config.`\n          );\n        }\n\n        // Make sure the different pathname matches\n        if (uCallback.pathname !== uProviderCallback.pathname) {\n          throw new Error(\n            `Forbidden callback provided: pathname don't match. Please verify your config.`\n          );\n        }\n\n        // NOTE: We're not checking the search parameters on purpose to allow passing different states\n      },\n    },\n  }),\n  validator() {},\n};\n"],"names":["config","default","env","jwtSecret","jwt","expiresIn","ratelimit","interval","max","layout","user","actions","create","update","callback","validate","provider","uCallback","uProviderCallback","URL","Error","origin","pathname","validator"],"mappings":";;;;;;;IAEAA,MAAiB,GAAA;AACfC,QAAAA,OAAAA,EAAS,CAAC,EAAEC,GAAG,EAAE,IAAM;AACrBC,gBAAAA,SAAAA,EAAWD,GAAI,CAAA,YAAA,CAAA;gBACfE,GAAK,EAAA;oBACHC,SAAW,EAAA;AACZ,iBAAA;gBACDC,SAAW,EAAA;oBACTC,QAAU,EAAA,KAAA;oBACVC,GAAK,EAAA;AACN,iBAAA;gBACDC,MAAQ,EAAA;oBACNC,IAAM,EAAA;wBACJC,OAAS,EAAA;4BACPC,MAAQ,EAAA,2BAAA;4BACRC,MAAQ,EAAA;AACT;AACF;AACF,iBAAA;gBACDC,QAAU,EAAA;oBACRC,QAASD,CAAAA,CAAAA,QAAQ,EAAEE,QAAQ,EAAA;wBACzB,IAAIC,SAAAA;wBACJ,IAAIC,iBAAAA;wBAEJ,IAAI;AACFD,4BAAAA,SAAAA,GAAY,IAAIE,GAAIL,CAAAA,QAAAA,CAAAA;4BACpBI,iBAAoB,GAAA,IAAIC,GAAIH,CAAAA,QAAAA,CAASF,QAAQ,CAAA;AACvD,yBAAA,CAAU,OAAM;AACN,4BAAA,MAAM,IAAIM,KAAM,CAAA,iCAAA,CAAA;AACjB;;AAGD,wBAAA,IAAIH,SAAUI,CAAAA,MAAM,KAAKH,iBAAAA,CAAkBG,MAAM,EAAE;AACjD,4BAAA,MAAM,IAAID,KAAAA,CACR,CAAC,4EAA4E,CAAC,CAAA;AAEjF;;AAGD,wBAAA,IAAIH,SAAUK,CAAAA,QAAQ,KAAKJ,iBAAAA,CAAkBI,QAAQ,EAAE;AACrD,4BAAA,MAAM,IAAIF,KAAAA,CACR,CAAC,6EAA6E,CAAC,CAAA;AAElF;;AAGF;AACF;aACL,CAAA;QACEG,SAAc,CAAA,GAAA;AAChB,KAAA;;;;;;"}