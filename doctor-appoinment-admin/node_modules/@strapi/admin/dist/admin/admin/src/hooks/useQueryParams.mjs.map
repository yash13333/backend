{"version":3,"file":"useQueryParams.mjs","sources":["../../../../../admin/src/hooks/useQueryParams.ts"],"sourcesContent":["import { useCallback, useMemo } from 'react';\n\nimport { parse, stringify } from 'qs';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nconst useQueryParams = <TQuery extends object>(initialParams?: TQuery) => {\n  const { search } = useLocation();\n  const navigate = useNavigate();\n\n  const query = useMemo(() => {\n    // TODO: investigate why sometimes we're getting the search with a leading `?` and sometimes not.\n    const searchQuery = search.startsWith('?') ? search.slice(1) : search;\n    if (!search && initialParams) {\n      return initialParams;\n    }\n\n    return { ...initialParams, ...parse(searchQuery) } as TQuery;\n  }, [search, initialParams]);\n\n  const setQuery = useCallback(\n    (nextParams: TQuery, method: 'push' | 'remove' = 'push', replace = false) => {\n      let nextQuery = { ...query };\n\n      if (method === 'remove') {\n        Object.keys(nextParams).forEach((key) => {\n          if (Object.prototype.hasOwnProperty.call(nextQuery, key)) {\n            // @ts-expect-error â€“ this is fine, if you want to fix it, please do.\n            delete nextQuery[key];\n          }\n        });\n      } else {\n        nextQuery = { ...query, ...nextParams };\n      }\n\n      navigate({ search: stringify(nextQuery, { encode: false }) }, { replace });\n    },\n    [navigate, query]\n  );\n\n  return [{ query, rawQuery: search }, setQuery] as const;\n};\n\nexport { useQueryParams };\n"],"names":["useQueryParams","initialParams","search","useLocation","navigate","useNavigate","query","useMemo","searchQuery","startsWith","slice","parse","setQuery","useCallback","nextParams","method","replace","nextQuery","Object","keys","forEach","key","prototype","hasOwnProperty","call","stringify","encode","rawQuery"],"mappings":";;;;AAKA,MAAMA,iBAAiB,CAAwBC,aAAAA,GAAAA;IAC7C,MAAM,EAAEC,MAAM,EAAE,GAAGC,WAAAA,EAAAA;AACnB,IAAA,MAAMC,QAAWC,GAAAA,WAAAA,EAAAA;AAEjB,IAAA,MAAMC,QAAQC,OAAQ,CAAA,IAAA;;QAEpB,MAAMC,WAAAA,GAAcN,OAAOO,UAAU,CAAC,OAAOP,MAAOQ,CAAAA,KAAK,CAAC,CAAKR,CAAAA,GAAAA,MAAAA;QAC/D,IAAI,CAACA,UAAUD,aAAe,EAAA;YAC5B,OAAOA,aAAAA;AACT;QAEA,OAAO;AAAE,YAAA,GAAGA,aAAa;AAAE,YAAA,GAAGU,MAAMH,WAAY;AAAC,SAAA;KAChD,EAAA;AAACN,QAAAA,MAAAA;AAAQD,QAAAA;AAAc,KAAA,CAAA;IAE1B,MAAMW,QAAAA,GAAWC,YACf,CAACC,UAAAA,EAAoBC,SAA4B,MAAM,EAAEC,UAAU,KAAK,GAAA;AACtE,QAAA,IAAIC,SAAY,GAAA;AAAE,YAAA,GAAGX;AAAM,SAAA;AAE3B,QAAA,IAAIS,WAAW,QAAU,EAAA;AACvBG,YAAAA,MAAAA,CAAOC,IAAI,CAACL,UAAYM,CAAAA,CAAAA,OAAO,CAAC,CAACC,GAAAA,GAAAA;gBAC/B,IAAIH,MAAAA,CAAOI,SAAS,CAACC,cAAc,CAACC,IAAI,CAACP,WAAWI,GAAM,CAAA,EAAA;;oBAExD,OAAOJ,SAAS,CAACI,GAAI,CAAA;AACvB;AACF,aAAA,CAAA;SACK,MAAA;YACLJ,SAAY,GAAA;AAAE,gBAAA,GAAGX,KAAK;AAAE,gBAAA,GAAGQ;AAAW,aAAA;AACxC;QAEAV,QAAS,CAAA;AAAEF,YAAAA,MAAAA,EAAQuB,UAAUR,SAAW,EAAA;gBAAES,MAAQ,EAAA;AAAM,aAAA;SAAM,EAAA;AAAEV,YAAAA;AAAQ,SAAA,CAAA;KAE1E,EAAA;AAACZ,QAAAA,QAAAA;AAAUE,QAAAA;AAAM,KAAA,CAAA;IAGnB,OAAO;AAAC,QAAA;AAAEA,YAAAA,KAAAA;YAAOqB,QAAUzB,EAAAA;AAAO,SAAA;AAAGU,QAAAA;AAAS,KAAA;AAChD;;;;"}