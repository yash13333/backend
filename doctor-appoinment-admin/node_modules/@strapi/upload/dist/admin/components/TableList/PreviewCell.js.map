{"version":3,"file":"PreviewCell.js","sources":["../../../../admin/src/components/TableList/PreviewCell.tsx"],"sourcesContent":["import { Avatar, Box, Flex } from '@strapi/design-system';\nimport { Folder } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { AssetType } from '../../constants';\nimport {\n  createAssetUrl,\n  getFileExtension,\n  getTrad,\n  prefixFileUrlWithBackendUrl,\n} from '../../utils';\nimport { VideoPreview } from '../AssetCard/VideoPreview';\n\nimport type { File } from '../../../../shared/contracts/files';\n\nconst VideoPreviewWrapper = styled(Box)`\n  figure {\n    width: ${({ theme }) => theme.spaces[7]};\n    height: ${({ theme }) => theme.spaces[7]};\n  }\n\n  canvas,\n  video {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 50%;\n  }\n`;\n\ninterface PreviewCellProps {\n  content: File;\n  type?: string;\n}\n\nexport const PreviewCell = ({ type, content }: PreviewCellProps) => {\n  const { formatMessage } = useIntl();\n  if (type === 'folder') {\n    return (\n      <Flex\n        justifyContent=\"center\"\n        background=\"secondary100\"\n        width=\"3.2rem\"\n        height=\"3.2rem\"\n        borderRadius=\"50%\"\n      >\n        <Folder\n          aria-label={formatMessage({\n            id: getTrad('header.actions.add-assets.folder'),\n            defaultMessage: 'folder',\n          })}\n          fill=\"secondary500\"\n          width=\"1.6rem\"\n          height=\"1.6rem\"\n        />\n      </Flex>\n    );\n  }\n\n  const { alternativeText, ext, formats, mime, name, url } = content;\n\n  if (mime?.includes(AssetType.Image)) {\n    const mediaURL =\n      prefixFileUrlWithBackendUrl(formats?.thumbnail?.url) ?? prefixFileUrlWithBackendUrl(url);\n\n    return (\n      <Avatar.Item\n        src={mediaURL}\n        alt={alternativeText || undefined}\n        preview\n        fallback={alternativeText}\n      />\n    );\n  }\n\n  if (mime?.includes(AssetType.Video)) {\n    return (\n      <VideoPreviewWrapper>\n        <VideoPreview\n          url={createAssetUrl(content, true) || ''}\n          mime={mime}\n          alt={alternativeText ?? name}\n        />\n      </VideoPreviewWrapper>\n    );\n  }\n\n  return (\n    <Box background=\"secondary100\" color=\"secondary600\" width=\"3.2rem\" height=\"3.2rem\">\n      {getFileExtension(ext)}\n    </Box>\n  );\n};\n"],"names":["VideoPreviewWrapper","styled","Box","theme","spaces","PreviewCell","type","content","formatMessage","useIntl","_jsx","Flex","justifyContent","background","width","height","borderRadius","Folder","aria-label","id","getTrad","defaultMessage","fill","alternativeText","ext","formats","mime","name","url","includes","AssetType","Image","mediaURL","prefixFileUrlWithBackendUrl","thumbnail","Avatar","Item","src","alt","undefined","preview","fallback","Video","VideoPreview","createAssetUrl","color","getFileExtension"],"mappings":";;;;;;;;;;;;;;;;;;AAgBA,MAAMA,mBAAAA,GAAsBC,uBAAOC,CAAAA,gBAAAA,CAAI;;WAE5B,EAAE,CAAC,EAAEC,KAAK,EAAE,GAAKA,KAAMC,CAAAA,MAAM,CAAC,CAAA,CAAE,CAAC;YAChC,EAAE,CAAC,EAAED,KAAK,EAAE,GAAKA,KAAMC,CAAAA,MAAM,CAAC,CAAA,CAAE,CAAC;;;;;;;;;;AAU7C,CAAC;MAOYC,WAAc,GAAA,CAAC,EAAEC,IAAI,EAAEC,OAAO,EAAoB,GAAA;IAC7D,MAAM,EAAEC,aAAa,EAAE,GAAGC,iBAAAA,EAAAA;AAC1B,IAAA,IAAIH,SAAS,QAAU,EAAA;AACrB,QAAA,qBACEI,cAACC,CAAAA,iBAAAA,EAAAA;YACCC,cAAe,EAAA,QAAA;YACfC,UAAW,EAAA,cAAA;YACXC,KAAM,EAAA,QAAA;YACNC,MAAO,EAAA,QAAA;YACPC,YAAa,EAAA,KAAA;AAEb,YAAA,QAAA,gBAAAN,cAACO,CAAAA,YAAAA,EAAAA;AACCC,gBAAAA,YAAAA,EAAYV,aAAc,CAAA;AACxBW,oBAAAA,EAAAA,EAAIC,eAAQ,CAAA,kCAAA,CAAA;oBACZC,cAAgB,EAAA;AAClB,iBAAA,CAAA;gBACAC,IAAK,EAAA,cAAA;gBACLR,KAAM,EAAA,QAAA;gBACNC,MAAO,EAAA;;;AAIf;AAEA,IAAA,MAAM,EAAEQ,eAAe,EAAEC,GAAG,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAE,GAAGrB,OAAAA;AAE3D,IAAA,IAAImB,IAAMG,EAAAA,QAAAA,CAASC,mBAAUC,CAAAA,KAAK,CAAG,EAAA;AACnC,QAAA,MAAMC,QACJC,GAAAA,uDAAAA,CAA4BR,OAASS,EAAAA,SAAAA,EAAWN,QAAQK,uDAA4BL,CAAAA,GAAAA,CAAAA;QAEtF,qBACElB,cAAA,CAACyB,oBAAOC,IAAI,EAAA;YACVC,GAAKL,EAAAA,QAAAA;AACLM,YAAAA,GAAAA,EAAKf,eAAmBgB,IAAAA,SAAAA;YACxBC,OAAO,EAAA,IAAA;YACPC,QAAUlB,EAAAA;;AAGhB;AAEA,IAAA,IAAIG,IAAMG,EAAAA,QAAAA,CAASC,mBAAUY,CAAAA,KAAK,CAAG,EAAA;AACnC,QAAA,qBACEhC,cAACV,CAAAA,mBAAAA,EAAAA;AACC,YAAA,QAAA,gBAAAU,cAACiC,CAAAA,yBAAAA,EAAAA;gBACCf,GAAKgB,EAAAA,6BAAAA,CAAerC,SAAS,IAAS,CAAA,IAAA,EAAA;gBACtCmB,IAAMA,EAAAA,IAAAA;AACNY,gBAAAA,GAAAA,EAAKf,eAAmBI,IAAAA;;;AAIhC;AAEA,IAAA,qBACEjB,cAACR,CAAAA,gBAAAA,EAAAA;QAAIW,UAAW,EAAA,cAAA;QAAegC,KAAM,EAAA,cAAA;QAAe/B,KAAM,EAAA,QAAA;QAASC,MAAO,EAAA,QAAA;kBACvE+B,iCAAiBtB,CAAAA,GAAAA;;AAGxB;;;;"}